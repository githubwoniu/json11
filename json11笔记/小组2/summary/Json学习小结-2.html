<!DOCTYPE html><html><head><title>Json学习小结-2</title><meta charset='utf-8'><link href='https://dn-maxiang.qbox.me/res-min/themes/marxico.css' rel='stylesheet'><style>
.note-content  {font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, Song, sans-serif;}

</style></head><body><div id='preview-contents' class='note-content'>
                        
                    



<h1 id="json学习小结-2">Json学习小结-2</h1>

<p>哎哟 2017-02-15</p>

<hr>



<h3 id="本小结内容">本小结内容</h3>

<p>解析null、boolean和数字</p>

<p>JSON 是树状结构，只包含 6 种数据类型：</p>

<ul><li>null：表示为null</li>
<li>boolean：表示为true或者false</li>
<li>number：一般的浮点数表示方法</li>
<li>string: 表示为 “…”</li>
<li>array: 表示为 [ … ]</li>
<li>object: 表示为 { … }</li>
</ul>

<hr>

<p><strong>1.</strong>根据叶大的教程，我们要实现的 JSON 库，主要是完成 3 个需求：</p>

<ul><li>把 JSON 文本解析为一个树状数据结构（parse）。</li>
<li>提供接口访问该数据结构（access）。</li>
<li>把数据结构转换成 JSON 文本（stringify）。</li>
</ul>



<p><img longdesc="http://i.imgur.com/vht0SmK.png" alt="" title="" type="image/png" src="data:image/png;base64,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" class=""></p>

<p><strong>2.</strong>下载的leptjson源码只包含三个文件：</p>

<ul><li>leptjson.h：leptjson 的头文件，含有对外类型和 API 函数声明。</li>
<li>leptjson.c：leptjson 的实现文件，含有内部的类型声明和函数实现。此文件会编译成库。</li>
<li>test.c：测试程序测试，需要链接 leptjson 库。</li>
</ul>

<p>为了解析三个数据类型，就要用到解析函数lept_parse(),其声明如下：</p>

<pre class="prettyprint hljs-dark"><code class="hljs aspectj"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">lept_parse</span><span class="hljs-params">(lept_value* v, <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* json)</span></span>;<br><span class="hljs-keyword">static</span> <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">lept_parse_null</span><span class="hljs-params">(lept_context* c, lept_value* v)</span></span>;<br><span class="hljs-keyword">static</span> <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">lept_parse_true</span><span class="hljs-params">(lept_context* c, lept_value* v)</span></span>; <br><span class="hljs-keyword">static</span> <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">lept_parse_false</span><span class="hljs-params">(lept_context* c, lept_value* v)</span></span>;<br></code></pre>

<p>传入的 JSON 文本是一个const char* 类型的 C 字符串（空结尾字符串），const类型的对象是不能被改动的，所以我们无法改动这个输入字符串。 <br>
具体定义：</p>



<pre class="prettyprint hljs-dark"><code class="language-C++ hljs">    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">lept_parse</span><span class="hljs-params">(lept_value* v, <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* json)</span> <br>    </span>{<br>        lept_context c;<br>        <span class="hljs-keyword">int</span> ret;<br>        assert(v != <span class="hljs-literal">NULL</span>);<br>        c.json = json;<br>        v-&gt;type = LEPT_NULL;<br>        lept_parse_whitespace(&amp;c);<br>        <span class="hljs-keyword">if</span> ((ret = lept_parse_value(&amp;c, v)) == LEPT_PARSE_OK) <br>        {<br>            lept_parse_whitespace(&amp;c);<br>            <span class="hljs-keyword">if</span> (*c.json != <span class="hljs-string">'\0'</span>)<br>                ret = LEPT_PARSE_ROOT_NOT_SINGULAR;<br>        }<br>        <span class="hljs-keyword">return</span> ret;<br>    }<br></code></pre>

<p>根据leptjson.c文件中已经定义好的test_ parse_null（）函数，我们可以编写自己的true、false函数。</p>

<p>true函数：</p>

<pre class="prettyprint hljs-dark"><code class="language-C++ hljs">    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> <span class="hljs-title">lept_parse_true</span><span class="hljs-params">(lept_context* c, lept_value* v)</span> <br>    </span>{<br>        EXPECT(c, <span class="hljs-string">'t'</span>);<br>        <span class="hljs-keyword">if</span> (c-&gt;json[<span class="hljs-number">0</span>] != <span class="hljs-string">'r'</span> || c-&gt;json[<span class="hljs-number">1</span>] != <span class="hljs-string">'u'</span> || c-&gt;json[<span class="hljs-number">2</span>] != <span class="hljs-string">'e'</span>)<br>            <span class="hljs-keyword">return</span> LEPT_PARSE_INVALID_VALUE;<br>        c-&gt;json += <span class="hljs-number">3</span>;<br>        v-&gt;type = LEPT_TRUE;<br>        <span class="hljs-keyword">return</span> LEPT_PARSE_OK;<br>    }<br></code></pre>

<p>false函数：</p>

<pre class="prettyprint hljs-dark"><code class="language-C++ hljs">    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> <span class="hljs-title">lept_parse_false</span><span class="hljs-params">(lept_context* c, lept_value* v)</span> <br>    </span>{<br>        EXPECT(c, <span class="hljs-string">'f'</span>);<br>        <span class="hljs-keyword">if</span> (c-&gt;json[<span class="hljs-number">0</span>] != <span class="hljs-string">'a'</span> || c-&gt;json[<span class="hljs-number">1</span>] != <span class="hljs-string">'l'</span> || <br>            c-&gt;json[<span class="hljs-number">2</span>] != <span class="hljs-string">'s'</span> || c-&gt;json[<span class="hljs-number">3</span>] != <span class="hljs-string">'e'</span>)<br>            <span class="hljs-keyword">return</span> LEPT_PARSE_INVALID_VALUE;<br>        c-&gt;json += <span class="hljs-number">4</span>;<br>        v-&gt;type = LEPT_FALSE;<br>        <span class="hljs-keyword">return</span> LEPT_PARSE_OK;<br>    }<br></code></pre>

<p>最后修改test.c中的test_parse()函数：</p>



<pre class="prettyprint hljs-dark"><code class="language-C++ hljs">    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test_parse</span><span class="hljs-params">()</span> <br>    </span>{<br>        test_parse_null();<br>        test_parse_true();<br>        test_parse_false();<br>    }<br></code></pre>

<p>最后运行结果：</p>

<p><img longdesc="http://i.imgur.com/YBltZwu.png" alt="" title="" type="image/png" src="data:image/png;base64,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AAECwt0YIECAAAECwQSEe7CGKocAAQIECAh3Y4AAAQIECAQTEO7BGqocAgQIECAg3I0BAgQIECAQTEC4B2uocggQIECAgHA3BggQIECAQDAB4R6socohQIAAAQLC3RggQIAAAQLBBIR7sIYqhwABAgQICHdjgAABAgQIBBMQ7sEaqhwCBAgQICDcjQECBAgQIBBMQLgHa6hyCBAgQICAcDcGCBAgQIBAMAHhHqyhyiFAgAABAsLdGCBAgAABAsEEhHuwhiqHAAECBAgId2OAAAECBAgEExDuwRqqHAIECBAgINyNAQIECBAgEExAuAdrqHIIECBAgIBwNwYIECBAgEAwAeEerKHKIUCAAAECwt0YIECAAAECwQSEe7CGKocAAQIECAh3Y4AAAQIECAQTEO7BGqocAgQIECAg3I0BAgQIECAQTEC4B2uocggQIECAgHA3BggQIECAQDAB4R6socohQIAAAQLC3RggQIAAAQLBBIR7sIYqhwABAgQICHdjgAABAgQIBBMQ7sEaqhwCBAgQICDcjQECBAgQIBBMQLgHa6hyCBAgQICAcDcGCBAgQIBAMAHhHqyhyiFAgAABAsLdGCBAgAABAsEEhHuwhiqHAAECBAgId2OAAAECBAgEExDuwRqqHAIECBAgINyNAQIECBAgEExAuAdrqHIIECBAgIBwNwYIECBAgEAwAeEerKHKIUCAAAECwt0YIECAAAECwQSEe7CGKocAAQIECAh3Y4AAAQIECAQTEO7BGqocAgQIECAg3I0BAgQIECAQTEC4B2uocggQIECAgHA3BggQIECAQDAB4R6socohQIAAAQLC3RggQIAAAQLBBIR7sIYqhwABAgQICHdjgAABAgQIBBMQ7sEaqhwCBAgQICDcjQECBAgQIBBMQLgHa6hyCBAgQICAcDcGCBAgQIBAMAHhHqyhyiFAgAABAsLdGCBAgAABAsEEhHuwhiqHAAECBAgId2OAAAECBAgEExDuwRqqHAIECBAgINyNAQIECBAgEExAuAdrqHIIECBAgIBwNwYIECBAgEAwAeEerKHKIUCAAAECwt0YIECAAAECwQSEe7CGKocAAQIECAh3Y4AAAQIECAQTEO7BGqocAgQIECAg3I0BAgQIECAQTEC4B2uocggQIECAgHA3BggQIECAQDAB4R6socohQIAAAQLC3RggQIAAAQLBBIR7sIYqhwABAgQICHdjgAABAgQIBBMQ7sEaqhwCBAgQICDcjQECBAgQIBBMQLgHa6hyCBAgQICAcDcGCBAgQIBAMAHhHqyhyiFAgAABAsLdGCBAgAABAsEEhHuwhiqHAAECBAgId2OAAAECBAgEExDuwRqqHAIECBAgINyNAQIECBAgEExAuAdrqHIIECBAgIBwNwYIECBAgEAwAeEerKHKIUCAAAECwt0YIECAAAECwQSEe7CGKocAAQIECAh3Y4AAAQIECAQTEO7BGqocAgQIECAg3I0BAgQIECAQTEC4B2uocggQIECAgHA3BggQIECAQDAB4R6socohQIAAAQLC3RggQIAAAQLBBIR7sIYqhwABAgQICHdjgAABAgQIBBMQ7sEaqhwCBAgQICDcjQECBAgQIBBMQLgHa6hyCBAgQICAcDcGCBAgQIBAMAHhHqyhyiFAgAABAsLdGCBAgAABAsEEhHuwhiqHAAECBAgId2OAAAECBAgEExDuwRqqHAIECBAgINyNAQIECBAgEExAuAdrqHIIECBAgIBwNwYIECBAgEAwAeEerKHKIUCAAAECwt0YIECAAAECwQSEe7CGKocAAQIECAh3Y4AAAQIECAQTEO7BGqocAgQIECAg3I0BAgQIECAQTEC4B2uocggQIECAgHA3BggQIECAQDAB4R6socohQIAAAQLC3RggQIAAAQLBBIR7sIYqhwABAgQICHdjgAABAgQIBBMQ7sEaqhwCBAgQICDcjQECBAgQIBBMQLgHa6hyCBAgQICAcDcGCBAgQIBAMAHhHqyhyiFAgAABAsLdGCBAgAABAsEEhHuwhiqHAAECBAgId2OAAAECBAgEExDuwRqqHAIECBAgINyNAQIECBAgEExAuAdrqHIIECBAgIBwNwYIECBAgEAwAeEerKHKIUCAAAECwt0YIECAAAECwQSEe7CGKocAAQIECAh3Y4AAAQIECAQTEO7BGqocAgQIECAg3I0BAgQIECAQTEC4B2uocggQIECAgHA3BggQIECAQDAB4R6socohQIAAAQLC3RggQIAAAQLBBIR7sIYqhwABAgQICHdjgAABAgQIBBMQ7sEaqhwCBAgQICDcjQECBAgQIBBMQLgHa6hyCBAgQICAcDcGCBAgQIBAMAHhHqyhyiFAgAABAsLdGCBAgAABAsEEhHuwhiqHAAECBAgId2OAAAECBAgEExDuwRqqHAIECBAgINyNAQIECBAgEExAuAdrqHIIECBAgIBwNwYIECBAgEAwAeEerKHKIUCAAAECwt0YIECAAAECwQSEe7CGKocAAQIECAh3Y4AAAQIECAQTEO7BGqocAgQIECAg3I0BAgQIECAQTEC4B2uocggQIECAgHA3BggQIECAQDCB/wfh5M2Ruq9Z/gAAAABJRU5ErkJggg==" class=""></p></div></body></html>